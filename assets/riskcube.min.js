!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var r={},n={},t={},i={}.hasOwnProperty,c=/^\.\.?(\/|$)/,o=function(e,r){for(var n,t=[],i=(c.test(r)?e+"/"+r:r).split("/"),o=0,a=i.length;o<a;o++)".."===(n=i[o])?t.pop():"."!==n&&""!==n&&t.push(n);return t.join("/")},a=function(e){return e.split("/").slice(0,-1).join("/")},u=function(r,t){var i,c={id:r,exports:{},hot:b&&b.createHot(r)};return n[r]=c,t(c.exports,(i=r,function(r){var n=o(a(i),r);return e.require(n,i)}),c),c.exports},s=function(e){var r=t[e];return r&&e!==r?s(r):e},l=function(e,t){null==t&&(t="/");var c=s(e);if(i.call(n,c))return n[c].exports;if(i.call(r,c))return u(c,r[c]);throw new Error("Cannot find module '"+e+"' from '"+t+"'")};l.alias=function(e,r){t[r]=e};var d=/\.[^.\/]+$/,f=/\/index(\.[^\/]+)?$/;l.register=l.define=function(e,c){if(e&&"object"==typeof e)for(var o in e)i.call(e,o)&&l.register(o,e[o]);else r[e]=c,delete n[e],function(e){if(d.test(e)){var r=e.replace(d,"");i.call(t,r)&&t[r].replace(d,"")!==r+"/index"||(t[r]=e)}if(f.test(e)){var n=e.replace(f,"");i.call(t,n)||(t[n]=e)}}(e)},l.list=function(){var e=[];for(var n in r)i.call(r,n)&&e.push(n);return e};var b=e._hmr&&new e._hmr((function(e,r){return s(o(a(e),r))}),l,r,n);l._cache=n,l.hmr=b&&b.wrap,l.brunch=!0,e.require=l}}(),function(){"undefined"==typeof window||window;require.register("Nx.ts",(function(e,r,n){"use strict";var t=window.jQuery,i={isDev:!1,actions:{}};e.Nx={dev:function(e){void 0===e&&(e=!0),i.isDev=e},log:function(e){i.isDev&&console.log(e)},addAction:function(e,r){i.actions[e]=r},callAction:function(e,r){"function"==typeof i.actions[e]?i.actions[e](r):console.error("NxAction "+e+" not defined")},dispatchEvent:function(e,r){void 0===r&&(r=null);var n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:{params:r}});return document.dispatchEvent(n),n},toast:function(e,r){void 0===r&&(r=!0);return t("<div></div>").dialog({show:r,title:e,buttons:[{text:"OK",click:function(){t(this).dialog("close")}}]})}},t(document).on("click",".x-action",(function(r){var n=t(r.currentTarget),i=n.attr("data-action");e.Nx.callAction(i,n)})),e.Nx.addAction("open",(function(e){return window.location.href=e.data("url")}))})),require.register("riskcube.admin.js",(function(e,r,n){"use strict";function t(e,r,n){if(!e.attr("disabled")){if(!0!==confirm(riskcube_admin.confirm))return!1;n.preventDefault();var t={action:r,nonce:e.data("nonce"),order:e.data("order")};e.attr("disabled","disabled"),jQuery.post(ajaxurl,t,(function(){return window.location.reload()}))}}function i(){var e=jQuery("#wc_riskcube_invoice_payment_gateway"),r=1===parseInt(e.val()),n=jQuery("tr.tr_riskcube_invoice"),t=n.find("select.select_riskcube_payment_method"),i=n.find("input.checkbox_riskcube_payment_method");r?(i.prop("checked",!0).addClass("rc-disabled"),t.val("invoice").addClass("rc-disabled")):(i.removeClass("rc-disabled"),t.removeClass("rc-disabled"))}jQuery((function(){return jQuery(document).on("click","#wc_riskcube_generate",(function(e){return t(jQuery(e.currentTarget),"wc_riskcube_reprocess",e)})).on("click","#wc_riskcube_refund",(function(e){return t(jQuery(e.currentTarget),"wc_riscube_refund",e)})).on("change","#wc_riskcube_invoice_payment_gateway",i),void i()}))})),require.register("riskcube.blocks.js",(function(e,r,n){"use strict";var t=r("./Nx"),i={promise:null,rqData:null};function c(e){t.Nx.log("canMakePayment",e);var r,n,c=function(e){t.Nx.log("getRequiredData",e);var r={shipping_same_as_billing:o(),shipping:e.shippingAddress};void 0!==e.billingAddress?r.billing=e.billingAddress:void 0!==e.billingData?r.billing=e.billingData:console.error("Unable to find Billing Data");void 0!==e.cart.cartTotals?r.cart=e.cart.cartTotals:void 0!==e.cartTotals?r.cart=e.cartTotals:console.error("Unable to find Cart Data");return r}(e);return!function(e){t.Nx.log("hasEmptyFields",e);var r=0;return["address_1","city","email","first_name","last_name","postcode"].forEach((function(n){""===e.shipping[n]&&r++,e.shipping_same_as_billing||""!==e.billing[n]||r++})),r>1}(c)&&(i.promise&&(r=c,n=i.rqData,t.Nx.log("isObjectEquals",r,n),JSON.stringify(r)===JSON.stringify(n))?(t.Nx.log("request running",i.promise),i.promise):new Promise((function(e,r){var n;i.rqData=c,i.promise=(n=c,t.Nx.log("ajaxVerifyCustomerData",n),jQuery.ajax({url:"/?rest_route=/riskcube/v1/verify-customer-data",method:"POST",data:n})).then((function(r){e(!0===r.allowInvoice),i.promise=!1,i.rqData=null})).catch((function(){e(!1),i.promise=!1,i.rqData=null}))})).then((function(e){return e})))}function o(){return t.Nx.log("isToggleSelected"),jQuery(".wc-block-checkout__use-address-for-billing #checkbox-control-1, .wc-block-checkout__use-address-for-billing #checkbox-control-0").is(":checked")}jQuery((function(){return"undefined"==typeof wc?(console.error("wc object not present, can not initialize"),!1):"undefined"==typeof riskCubeCf?(console.error("riskCubeCf object not present, can not initialize"),!1):void wc.wcBlocksRegistry.registerPaymentMethod({name:riskCubeCf.id,label:riskCubeCf.label,ariaLabel:riskCubeCf.label,content:wp.element.createElement("div",null,riskCubeCf.description),edit:wp.element.createElement("div",null,riskCubeCf.description),canMakePayment:c})}))})),require.register("riskcube.checkInvoices.js",(function(e,r,n){"use strict";function t(e){var r=new FormData,n=document.getElementById("rc_upload-file").files;if(0===n.length)return new Promise((function(e){return e(!0)}));Array.from(n).forEach((function(e,n){return r.append(n+"",e)}));return fetch("/?rest_route=/riskcube/v1/upload-files",{method:"POST",body:r,headers:{"X-WP-Nonce":e.wpRest}})}function i(e){var r=jQuery("#rc-loader"),n=jQuery("#rc-loading-error"),t=jQuery("#rc-check-invoices-table"),i=jQuery("#rc-check-invoices-table-data"),c=jQuery("#rc-no-orders");c.hide(),i.html(""),r.show(),n.hide(),jQuery.ajax({url:"/?rest_route=/riskcube/v1/check-invoices",beforeSend:function(r){r.setRequestHeader("X-WP-Nonce",e.wpRest)},success:function(r){0===r.orders.length?(c.show(),t.hide()):(r.orders.forEach((function(r){return i.append(function(e,r){return'<tr class="rc_data-row" data-href="'.concat(e.url,'">\n\t\t<td>').concat(e.id,"</td>\n\t\t<td>").concat(e.date,"</td>\n\t\t<td>").concat(e.name,"</td>\n\t\t<td>").concat(e.currency," ").concat(e.total,"</td>\n\t\t<td><a>").concat(r.textOpen,"</a></td>\n\t\t</tr>")}(r,e))})),t.show())},complete:function(){r.hide()},error:function(){n.show(),t.hide()}})}window.checkInvoicesInit=function(e){!function(e){jQuery(document).on("click","#rc_check_invoices",(function(){var r=jQuery("#rc-loader"),n=jQuery("#rc-loading-error");jQuery("#rc-check-invoices-table-data").html(""),r.show(),n.hide(),t(e).then((function(){return i(e)}))})),jQuery("#rc-check-invoices-table").on("click","tbody tr",(function(e){window.open(jQuery(e.currentTarget).data().href,"_blank").focus()}))}(e),i(e)},window.uploadFiles=t})),require.register("riskcube.legacy.js",(function(e,r,n){"use strict";var t=r("./riskcubeLib");r("./Nx").Nx.log("Riskcube LEGACY form"),t.NxRiskCube.initLegacy()})),require.register("riskcubeLib.ts",(function(e,r,n){"use strict";var t=r("./Nx"),i=window.jQuery;e.riskcubeLib={requiredFields:["billing_first_name","billing_last_name","billing_address_1","billing_postcode","billing_city","billing_email"],shippingFields:["shipping_first_name","shipping_last_name","shipping_address_1","shipping_postcode","shipping_city"]},e.NxRiskCube={initLegacy:function(){i((function(){i(document).on("change","form.checkout",(function(){var r,n;t.Nx.log("form change"),n={},i("form.checkout").serializeArray().forEach((function(e){return n[e.name]=e.value})),r=n,(i("#ship-to-different-address-checkbox").is(":checked")?e.riskcubeLib.requiredFields.concat(e.riskcubeLib.shippingFields):e.riskcubeLib.requiredFields).map((function(e){return r[e]+""!=""})).reduce((function(e,r){return e&&r}))&&(t.Nx.log("update checkout"),i(document.body).trigger("update_checkout"))}))}))}}})),require.register("___globals___",(function(e,r,n){}))}(),require("___globals___");
